<html>
<head>
    <title>Content Handler Example</title> 
    <meta name="Description" content="Content Handler Example">
</head>
<body bgcolor="white">


<h1>Creating a content handler with mod_perl</h1>

Handlers are simply perl subroutines called by the server at various stages of the HTTP request cycle.
A content handler is a subroutine that is called by the response phase.  Handlers, are 
typically created as a perl modules, separate files store in a library, and accessable via perl's @INC array.

For example, here's an example that returns a greeting and the current local time.

<pre>
    package My::Greeting;
    use strict;
  
    sub handler {
        my $r = shift;
        my $now = scalar localtime;
        my $server_name = $r-&gt;server-&gt;server_hostname;

        $r-&gt;send_http_header('text/plain');
        
        print &lt;&lt;EOT;
            Thanks for visiting $server_name.
            The local time is $now
        EOT
        return Apache::Constants::OK;
    }
    1; # modules must return true
</pre>

Save the above as a file file in your perl library (e.g. My/Greeting.pm).
Now, to return the above greeting when the URL /hello is visited on your server:

<pre>
    &lt;location /hello&gt;
        SetHandler perl-script
        PerlHandler My::Greeting
    &lt;/files&gt;
</pre>


<p>
For a more in-depth explanation of creating mod_perl handlers see
<a href="../../docs/index.html">Documentation</a>.
The <a href="../../docs/1.0/guide/index.html">mod_perl Guide</a> is also recommended
reading.


<p>
<a class="more" href="../index.html#handler">&#171&nbsp;back</a>
</p>


</body>
</html>
